(this.webpackJsonp=this.webpackJsonp||[]).push([[12],{"+F8P":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var a=i("q+nE"),n=i("zLBL"),s=i("t9l/");const r=function(e){var t;return null===(t=n.a.props[e])||void 0===t?void 0:t.default},l=function(){let{inline:e=r("inline"),color:t=r("color"),size:i=r("size"),classes:l=[],label:o=Object(s.a)("Loading")}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=document.createElement("div"),u=new a.default({el:c,render:a=>a(n.a,{class:l,props:{inline:e,color:t,size:i,label:o}})});u.$forceUpdate();const d=u.$el.cloneNode(!0);return u.$destroy(),d}},"+lve":function(e,t,i){"use strict";i.d(t,"e",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return c})),i.d(t,"b",(function(){return u}));var a=i("mABg"),n=i.n(a);i("g+EE"),i("h8Et"),i("uHfJ"),i("R0RX");const s=function(e){return!("string"!=typeof e||!e.startsWith("gid://gitlab/"))},r=function(e){return parseInt((""+e).replace(/gid:\/\/gitlab\/.*\//g,""),10)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=r(e);return Number.isInteger(t)?t:null},o={Append:"APPEND",Remove:"REMOVE",Replace:"REPLACE"},c=function(e,t){if("string"!=typeof e)throw new TypeError("type must be a string; got "+typeof e);if(!["number","string"].includes(typeof t))throw new TypeError("id must be a number or string; got "+typeof t);return s(t)?t:`gid://gitlab/${e}/${t}`},u=function(e){if(!n()(e))throw new TypeError("nodes must be an array; got "+typeof e);return e.map((function(e){return e.id?{...e,id:l(e.id)}:e}))}},F87h:function(e,t,i){"use strict";i("g+EE");var a=i("mphk"),n=i("MG03");class s extends n.a{constructor(){super(),this.pendingRequests={}}override(e,t){this.internalStorage[e]=t}retrieve(e,t){var i=this;if(this.hasData(e)&&!t)return Promise.resolve(this.get(e));let n=this.pendingRequests[e];return n||(n=a.a.get(e).then((function(t){let{data:a}=t;i.internalStorage[e]=a,delete i.pendingRequests[e]})).catch((function(t){const a=new Error(`${e}: ${t.message}`);throw a.textStatus=t.message,delete i.pendingRequests[e],a})),this.pendingRequests[e]=n),n.then((function(){return i.get(e)}))}}t.a=new s},LkRf:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return r})),i.d(t,"e",(function(){return l})),i.d(t,"f",(function(){return o})),i.d(t,"g",(function(){return c})),i.d(t,"h",(function(){return u})),i.d(t,"i",(function(){return d})),i.d(t,"j",(function(){return h})),i.d(t,"k",(function(){return p})),i.d(t,"l",(function(){return m})),i.d(t,"m",(function(){return f})),i.d(t,"n",(function(){return g})),i.d(t,"o",(function(){return v}));const a=3,n="Board",s="Ci::Runner",r="CustomerRelations::Contact",l="CustomerRelations::Organization",o="Epic",c="Group",u="Issue",d="Iteration",h="MergeRequest",p="Milestone",m="Note",f="Project",g="User",v="WorkItem"},P8Ze:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));i("uHfJ"),i("R0RX");var a=i("AUIv"),n=i("teVv"),s=i("t9l/"),r=i("LuMo"),l=i("yYHy"),o=i("LkRf"),c=i("+lve"),u=i("voi4"),d=i("mphk"),h=i("mpX+"),p=i.n(h);const m=Object(u.a)({},{fetchPolicy:u.b.NO_CACHE});class f{constructor(e){return f.singleton||(this.endpoint=e.endpoint,this.moveIssueEndpoint=e.moveIssueEndpoint,this.projectsAutocompleteEndpoint=e.projectsAutocompleteEndpoint,this.fullPath=e.fullPath,this.iid=e.iid,this.issuableType=e.issuableType,f.singleton=this),f.singleton}get(){return d.a.get(this.endpoint)}update(e,t){return d.a.put(this.endpoint,{[e]:t})}getProjectsAutocomplete(e){return d.a.get(this.projectsAutocompleteEndpoint,{params:{search:e}})}moveIssue(e){return d.a.post(this.moveIssueEndpoint,{move_to_project_id:e})}requestReview(e){return m.mutate({mutation:p.a,variables:{userId:Object(c.c)(o.n,""+e),projectPath:this.fullPath,iid:this.iid.toString()}})}}class g{constructor(e){return g.singleton||this.initSingleton(e),g.singleton}initSingleton(e){this.store=new a.a(e),this.service=new f({endpoint:e.endpoint,moveIssueEndpoint:e.moveIssueEndpoint,projectsAutocompleteEndpoint:e.projectsAutocompleteEndpoint,fullPath:e.fullPath,iid:e.iid,issuableType:e.issuableType}),g.singleton=this}assignYourself(){this.store.addAssignee(this.store.currentUser)}async saveAssignees(e){const t=this.store.assignees.map((function(e){return e.id})),i={assignee_ids:0===t.length?[0]:t};try{const t=await this.service.update(e,i);return this.store.overwrite("assignees",t.data.assignees),t.data.reviewers&&this.store.overwrite("reviewers",t.data.reviewers),Promise.resolve(t)}catch(e){return Promise.reject(e)}}async saveReviewers(e){const t=this.store.reviewers.map((function(e){return e.id})),i={reviewer_ids:0===t.length?[0]:t};try{const t=await this.service.update(e,i);return this.store.overwrite("reviewers",t.data.reviewers),this.store.overwrite("assignees",t.data.assignees),Promise.resolve(t)}catch(e){return Promise.reject()}}requestReview(e){var t=this;let{userId:i,callback:a}=e;return this.service.requestReview(i).then((function(){t.store.updateReviewer(i,"reviewed"),Object(r.a)(Object(s.a)("Requested review")),a(i,!0)})).catch((function(){return a(i,!1)}))}setMoveToProjectId(e){this.store.setMoveToProjectId(e)}fetch(){var e=this;return this.service.get().then((function(t){let{data:i}=t;e.processFetchedData(i)})).catch((function(){return Object(n.createAlert)({message:Object(s.a)("Error occurred when fetching sidebar data")})}))}processFetchedData(e){this.store.setAssigneeData(e),this.store.setReviewerData(e),this.store.setTimeTrackingData(e)}fetchAutocompleteProjects(e){var t=this;return this.service.getProjectsAutocomplete(e).then((function(e){let{data:i}=e;return t.store.setAutocompleteProjects(i),t.store.autocompleteProjects}))}moveIssue(){return this.service.moveIssue(this.store.moveToProjectId).then((function(e){let{data:t}=e;window.location.pathname!==t.web_url&&Object(l.O)(t.web_url)}))}}},Zxcm:function(e,t,i){"use strict";t.a=function(){return{inject:{glFeatures:{from:"glFeatures",default:function(){return{}}}}}}},gadi:function(e,t,i){"use strict";i("6oy4"),i("y7PY"),i("NApX")},"mpX+":function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mergeRequestRequestRereview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UserID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeRequestReviewerRereview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"ObjectField",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}},{kind:"ObjectField",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:207}};i.loc.source={body:"mutation mergeRequestRequestRereview($projectPath: ID!, $iid: String!, $userId: UserID!) {\n  mergeRequestReviewerRereview(input: { projectPath: $projectPath, iid: $iid, userId: $userId }) {\n    errors\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function n(e,t){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==t)return a}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&i.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.mergeRequestRequestRereview=function(e,t){var i={kind:e.kind,definitions:[n(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var s=a[t]||new Set,r=new Set,l=new Set;for(s.forEach((function(e){l.add(e)}));l.size>0;){var o=l;l=new Set,o.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){l.add(e)})))}))}return r.forEach((function(t){var a=n(e,t);a&&i.definitions.push(a)})),i}(i,"mergeRequestRequestRereview")},xhFg:function(e,t,i){"use strict";i.d(t,"b",(function(){return R}));var a=i("Hoxe"),n=i.n(a),s=i("lb6a"),r=i.n(s),l=i("ZMwX"),o=i.n(l),c=i("A1CF"),u=i.n(c),d=(i("uHfJ"),i("R0RX"),i("ujLG"),i("3R5X"),i("HaUQ"),i("0rNO"),i("ktLj"),i("/vEX"),i("WmlO"),i("W9Nl"),i("h8Et"),i("ylB9"),i("XexO"),i("6oy4")),h=i.n(d),p=(i("gadi"),i("8GQU")),m=i("mphk"),f=i("+F8P"),g=i("t9l/"),v=i("Daar"),b=i("P8Ze"),w=i("SVdh"),$=i("F87h"),k=i("oj/M"),y=i("U1Ws"),j=i("K/OF");function D(e){return u()(e).replace(/\$/g,"&dollar;")}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.on(`hidden${t?"-":""}${t}.atwho`,(function(){e.removeClass("at-who-active")})),e.on(`shown${t?"-":""}${t}.atwho`,(function(){e.addClass("at-who-active")}))}function S(e){return`${e.name.replace(/ /g,"")} ${e.username}`}function T(e){return e.map((function(e){let t="";if(null==e.username)return e;t=e.name,e.count&&!e.mentionsDisabled&&(t+=` (${e.count})`);const i=e.avatar_url||e.username.charAt(0).toUpperCase(),a="Group"===e.type?"rect-avatar":"",n=`<img src="${e.avatar_url}" alt="${e.username}" class="avatar ${a} avatar-inline center s26"/>`,s=`<div class="avatar ${a} center avatar-inline s26">${i}</div>`,r=e.mentionsDisabled?Object(k.M)("notifications-off","s16 vertical-align-middle gl-ml-2"):"";return{username:e.username,avatarTag:1===i.length?s:n,title:t,search:S(e),icon:r,availability:null==e?void 0:e.availability}}))}const L=function(e,t){if(!t)return e;const i=n()(t),a=new RegExp(`>\\s*([^<]*?)(${i})([^<]*)\\s*<`,"ig");return e.replace(a,(function(e,t,i,a){return`> ${t}<strong>${i}</strong>${a} <`}))},R={emojis:!0,members:!0,issues:!0,mergeRequests:!0,epics:!0,milestones:!0,labels:!0,snippets:!0,vulnerabilities:!0,contacts:!0};class I{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dataSources=e,this.cachedData={},this.isLoadingData={},this.previousQuery=""}setup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;this.input=e||h()(".js-gfm-input"),this.enableMap=t,this.setupLifecycle()}setupLifecycle(){var e=this;this.input.each((function(t,i){const a=h()(i);a.hasClass("js-gfm-input-initialized")||(a.off("focus.setupAtWho").on("focus.setupAtWho",e.setupAtWho.bind(e,a)),a.on("change.atwho",(function(){return i.dispatchEvent(new Event("input"))})),a.on("inserted-commands.atwho",a.trigger.bind(a,"keyup")),a.on("clear-commands-cache.atwho",(function(){return e.clearCache()})),a.addClass("js-gfm-input-initialized"))}))}setupAtWho(e){this.enableMap.emojis&&this.setupEmoji(e),this.enableMap.members&&this.setupMembers(e),this.enableMap.issues&&this.setupIssues(e),this.enableMap.milestones&&this.setupMilestones(e),this.enableMap.mergeRequests&&this.setupMergeRequests(e),this.enableMap.labels&&this.setupLabels(e),this.enableMap.snippets&&this.setupSnippets(e),this.enableMap.contacts&&this.setupContacts(e),e.filter('[data-supports-quick-actions="true"]').atwho({at:"/",alias:"commands",searchKey:"search",limit:100,skipSpecialCharacterTest:!0,skipMarkdownCharacterTest:!0,data:I.defaultLoadingData,displayTpl(e){const t=[];if(I.isLoading(e))return I.Loading.template;let i='<li class="<%- className %>"><span class="name">/${name}</span>';return e.aliases.length>0&&(i+=' <small class="aliases">(or /<%- aliases.join(", /") %>)</small>'),e.params.length>0&&(i+=' <small class="params"><%- params.join(" ") %></small>'),e.warning&&e.icon&&"confidential"===e.icon?i+=`<small class="description gl-display-flex gl-align-items-center">${Object(k.M)("eye-slash","s16 gl-mr-2")}<em><%- warning %></em></small>`:e.warning?i+='<small class="description"><em><%- warning %></em></small>':""!==e.description&&(i+='<small class="description"><em><%- description %></em></small>'),i+="</li>",e.warning&&t.push("has-warning"),r()(i)({...e,className:t.join(" ")})},insertTpl(e){let t="/${name} ",i=null;if(e.params.length>0){const a=/\[[a-z]+:/.exec(e.params);a?([i]=a,t+="<%- referencePrefix %>"):([[i]]=e.params,/^[@%~]/.test(i)&&(t+="<%- referencePrefix %>"))}return r()(t,{interpolate:/<%=([\s\S]+?)%>/g})({referencePrefix:i})},suffix:"",callbacks:{...this.getDefaultCallbacks(),beforeSave:e=>I.isLoading(e)?e:h.a.map(e,(function(e){let t=e.name;return e.aliases.length>0&&(t=`${t} ${e.aliases.join(" ")}`),{name:e.name,aliases:e.aliases,params:e.params,description:e.description,warning:e.warning,icon:e.icon,search:t}})),matcher(e,t){const i=/(?:^|\n)\/([A-Za-z_]*)$/gi.exec(t);return i?i[1]:null}}})}setupEmoji(e){const t=this.fetchData.bind(this);e.atwho({at:":",displayTpl:I.Emoji.templateFunction,insertTpl:I.Emoji.insertTemplateFunction,skipSpecialCharacterTest:!0,data:I.defaultLoadingData,callbacks:{...this.getDefaultCallbacks(),matcher(e,t){const i=new RegExp(`(?:[^${j.b.unicodeLetters}0-9:]|\n|^):([^ :][^:]*)?$`,"gi").exec(t);return i&&i.length?i[1]||"":null},filter(e,i){return I.isLoading(i)?(t(this.$inputor,this.at),i):I.Emoji.filter(e)},sorter(e,t){return this.setting.highlightFirst=this.setting.alwaysHighlightFirst||e.length>0,I.isLoading(t)?(this.setting.highlightFirst=!1,t):0===e.length?t:I.Emoji.sorter(t)}}}),E(e)}setupMembers(e){const t=this.fetchData.bind(this),i={ASSIGN:"/assign",UNASSIGN:"/unassign",ASSIGN_REVIEWER:"/assign_reviewer",UNASSIGN_REVIEWER:"/unassign_reviewer",REASSIGN:"/reassign",CC:"/cc"};let a=[],n=[],s="";e.atwho({at:"@",alias:"users",displayTpl(e){let t=I.Loading.template;const{avatarTag:i,username:a,title:n,icon:s,availability:r}=e;return null!=a&&(t=I.Members.templateFunction({avatarTag:i,username:a,title:n,icon:s,availabilityStatus:r&&Object(v.a)(r)?`<span class="gl-text-gray-500"> ${Object(g.g)("UserAvailability|(Busy)")}</span>`:""})),t},insertTpl:"${atwho-at}${username}",limit:10,searchKey:"search",alwaysHighlightFirst:!0,skipSpecialCharacterTest:!0,data:I.defaultLoadingData,callbacks:{...this.getDefaultCallbacks(),beforeSave:T,matcher(e,t){var r,l,o,c,u,d;const h=t.split(/\n+/g).pop().split(I.regexSubtext);s=h.find((function(e){return Object.values(i).includes(e)?e:null})),a=(null===(r=b.a.singleton)||void 0===r||null===(l=r.store)||void 0===l||null===(o=l.assignees)||void 0===o?void 0:o.map(S))||[],n=(null===(c=w.b.issuable)||void 0===c||null===(u=c.reviewers)||void 0===u||null===(d=u.nodes)||void 0===d?void 0:d.map(S))||[];const p=I.defaultMatcher(e,t,this.app.controllers);return p&&p.length?p[1]:null},filter(e,r,l){return I.isLoading(r)?(t(this.$inputor,this.at),r):r===I.defaultLoadingData?h.a.fn.atwho.default.callbacks.filter(e,r,l):s===i.ASSIGN?r.filter((function(e){return!a.includes(e.search)})):s===i.UNASSIGN?r.filter((function(e){return a.includes(e.search)})):s===i.ASSIGN_REVIEWER?r.filter((function(e){return!n.includes(e.search)})):s===i.UNASSIGN_REVIEWER?r.filter((function(e){return n.includes(e.search)})):r},sorter(e,t){return this.setting.highlightFirst=this.setting.alwaysHighlightFirst,I.isLoading(t)?(this.setting.highlightFirst=!1,t):e?I.Members.sort(e,t):t}}}),E(e,"users")}setupIssues(e){e.atwho({at:"#",alias:"issues",searchKey:"search",displayTpl(e){let t=I.Loading.template;return null!=e.title&&(t=I.Issues.templateFunction(e)),t},data:I.defaultLoadingData,insertTpl:I.Issues.insertTemplateFunction,skipSpecialCharacterTest:!0,callbacks:{...this.getDefaultCallbacks(),beforeSave:e=>h.a.map(e,(function(e){return null==e.title?e:{id:e.iid,title:e.title,reference:e.reference,search:`${e.iid} ${e.title}`}}))}}),E(e,"issues")}setupMilestones(e){e.atwho({at:"%",alias:"milestones",searchKey:"search",insertTpl:"${atwho-at}${title}",displayTpl(e){let t=I.Loading.template;return null!=e.title&&(t=I.Milestones.templateFunction(e.title,e.expired)),t},data:I.defaultLoadingData,callbacks:{...this.getDefaultCallbacks(),beforeSave(e){const t=h.a.map(e,(function(e){if(null==e.title)return e;const t=e.due_date?Object(y.z)(e.due_date):null,i=!!t&&Date.now()>t.getTime();return{id:e.iid,title:e.title,search:e.title,expired:i,dueDate:t}}));return"object"==typeof t[0]?t.sort((function(e,t){return e.expired?1:t.expired?-1:e.dueDate?t.dueDate?e.dueDate-t.dueDate:-1:1})):t}}}),E(e,"milestones")}setupMergeRequests(e){e.atwho({at:"!",alias:"mergerequests",searchKey:"search",displayTpl(e){let t=I.Loading.template;return null!=e.title&&(t=I.Issues.templateFunction(e)),t},data:I.defaultLoadingData,insertTpl:I.Issues.insertTemplateFunction,skipSpecialCharacterTest:!0,callbacks:{...this.getDefaultCallbacks(),beforeSave:e=>h.a.map(e,(function(e){return null==e.title?e:{id:e.iid,title:e.title,reference:e.reference,search:`${e.iid} ${e.title}`}}))}}),E(e,"mergerequests")}setupLabels(e){const t=this,i=this.fetchData.bind(this),a="/label",n="/unlabel",s="/relabel";let r="";e.atwho({at:"~",alias:"labels",searchKey:"search",data:I.defaultLoadingData,displayTpl(e){let t=I.Labels.templateFunction(e.color,e.title);return I.isLoading(e)&&(t=I.Loading.template),t},insertTpl:"${atwho-at}${title}",limit:20,callbacks:{...this.getDefaultCallbacks(),beforeSave:e=>I.isLoading(e)?e:h.a.map(e,(function(e){return{title:e.title,color:e.color,search:e.title,set:e.set}})),matcher(e,l){const o=l.split(/\n+/g).pop().split(I.regexSubtext);r=o.find((function(e){return e===a||e===s||e===n?e:null}));const c=t.cachedData[e];if(c){if(!l.includes(e))return null;if(l.endsWith("~~"))return null;const t=l.split(e).pop();if(c.find((function(e){return e.title.startsWith(t)})))return t}else i(this.$inputor,this.at);const u=I.defaultMatcher(e,l,this.app.controllers);return u&&u.length?u[1]:null},filter(e,t,s){return I.isLoading(t)?(i(this.$inputor,this.at),t):t===I.defaultLoadingData?h.a.fn.atwho.default.callbacks.filter(e,t,s):r===a?t.filter((function(e){return!e.set})):r===n?t.filter((function(e){return e.set})):t}}}),E(e,"labels")}setupSnippets(e){e.atwho({at:"$",alias:"snippets",searchKey:"search",displayTpl(e){let t=I.Loading.template;return null!=e.title&&(t=I.Issues.templateFunction(e)),t},data:I.defaultLoadingData,insertTpl:"${atwho-at}${id}",callbacks:{...this.getDefaultCallbacks(),beforeSave:e=>h.a.map(e,(function(e){return null==e.title?e:{id:e.id,title:e.title,search:`${e.id} ${e.title}`}}))}}),E(e,"snippets")}setupContacts(e){const t=this.fetchData.bind(this);let i="";e.atwho({at:"[contact:",suffix:"]",alias:"contacts",searchKey:"search",displayTpl(e){let t=I.Loading.template;return null!=e.email&&(t=I.Contacts.templateFunction(e)),t},data:I.defaultLoadingData,insertTpl:"${atwho-at}${email}",callbacks:{...this.getDefaultCallbacks(),beforeSave:e=>h.a.map(e,(function(e){return null==e.email?e:{id:e.id,email:e.email,firstName:e.first_name,lastName:e.last_name,search:""+e.email,state:e.state,set:e.set}})),matcher(e,t){const a=t.split(/\n+/g).pop().split(I.regexSubtext);i=a.find((function(e){return"/add_contacts"===e||"/remove_contacts"===e?e:null}));const n=I.defaultMatcher(e,t,this.app.controllers);return null!=n&&n.length?n[1]:null},filter(e,a,n){return I.isLoading(a)?(t(this.$inputor,this.at),a):a===I.defaultLoadingData?h.a.fn.atwho.default.callbacks.filter(e,a,n):"/add_contacts"===i?a.filter((function(e){return"active"===e.state&&!e.set})):"/remove_contacts"===i?a.filter((function(e){return e.set})):a}}}),E(e,"contacts")}getDefaultCallbacks(){const e=this;return{sorter(e,t,i){return this.setting.highlightFirst=this.setting.alwaysHighlightFirst||e.length>0,I.isLoading(t)?(this.setting.highlightFirst=!1,t):h.a.fn.atwho.default.callbacks.sorter(e,t,i)},filter(t,i,a){return I.isLoading(i)?(e.fetchData(this.$inputor,this.at),i):I.isTypeWithBackendFiltering(this.at)&&e.previousQuery!==t?(e.fetchData(this.$inputor,this.at,t),e.previousQuery=t,i):h.a.fn.atwho.default.callbacks.filter(t,i,a)},beforeInsert(e){let t=e.substring(1);const i=e.charAt();if(e&&!this.setting.skipSpecialCharacterTest){const e="~"===i?/\W|^\d+$/:/\W/;t&&e.test(t)&&(t=`"${t}"`)}return this.setting.skipMarkdownCharacterTest||(t=t.replace(/(~~|`|\*)/g,"\\$1").replace(/(\b)(_+)/g,"$1\\$2").replace(/(_+)(\b)/g,"\\$1$2")),`${i}${t}`},matcher(e,t){const i=I.defaultMatcher(e,t,this.app.controllers);return i?i[1]:null},highlighter:L}}fetchData(e,t,i){var a=this;if(this.isLoadingData[t])return;this.isLoadingData[t]=!0;const n=this.dataSources[I.atTypeMap[t]];I.isTypeWithBackendFiltering(t)?m.a.get(n,{params:{search:i}}).then((function(i){let{data:n}=i;a.loadData(e,t,n)})).catch((function(){a.isLoadingData[t]=!1})):this.cachedData[t]?this.loadData(e,t,this.cachedData[t]):"emojis"===I.atTypeMap[t]?this.loadEmojiData(e,t).catch((function(){})):n?$.a.retrieve(n,!0).then((function(i){a.loadData(e,t,i)})).catch((function(){a.isLoadingData[t]=!1})):this.isLoadingData[t]=!1}loadData(e,t,i){return this.isLoadingData[t]=!1,this.cachedData[t]=i,e.atwho("load",t,i),e.trigger("keyup")}async loadEmojiData(e,t){await p.initEmojiMap(),this.loadData(e,t,["loaded"]),I.glEmojiTag=p.glEmojiTag}clearCache(){this.cachedData={}}destroy(){this.input.each((function(e,t){h()(t).atwho("destroy")}))}static isLoading(e){let t=e;e&&e.length>0&&([t]=e);const i=I.defaultLoadingData[0];return t&&(t===i||t.name===i)}static defaultMatcher(e,t,i){const a=Object.keys(i).join("|").replace(/[$]/,"\\$&").replace(/([[\]:])/g,"\\$1"),n=Object.keys(i).join(""),s=t.split(I.regexSubtext).pop(),r=e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&"),l=decodeURI("%C3%80"),o=decodeURI("%C3%BF");return new RegExp(`^(?:\\B|[^a-zA-Z0-9_\`${n}]|\\s)${r}(?!${a})((?:[A-Za-z${l}-${o}0-9_'.+-:]|[^\\x00-\\x7a])*)$`,"gi").exec(s)}}I.regexSubtext=/\s+/g,I.defaultLoadingData=["loading"],I.atTypeMap={":":"emojis","@":"members","#":"issues","!":"mergeRequests","&":"epics","~":"labels","%":"milestones","/":"commands","[vulnerability:":"vulnerabilities",$:"snippets","[contact:":"contacts"},I.typesWithBackendFiltering=["vulnerabilities"],I.isTypeWithBackendFiltering=function(e){return I.typesWithBackendFiltering.includes(I.atTypeMap[e])},I.glEmojiTag=null,I.Emoji={insertTemplateFunction:e=>`:${e.emoji.name}:`,templateFunction(e){if(I.isLoading(e))return I.Loading.template;const t=D(e.fieldValue);return I.glEmojiTag?`<li>${t} ${I.glEmojiTag(e.emoji.name)}</li>`:`<li>${t}</li>`},filter:e=>0===e.length?Object.values(p.getAllEmoji()).map((function(e){return{emoji:e,fieldValue:e.name}})).slice(0,20):p.searchEmoji(e),sorter:e=>e.sort(p.sortEmoji)},I.Members={templateFunction(e){let{avatarTag:t,username:i,title:a,icon:n,availabilityStatus:s}=e;return`<li>${t} ${i} <small>${D(a)}${s}</small> ${n}</li>`},nameOrUsernameStartsWith:(e,t)=>e.search.split(" ").some((function(e){return e.toLowerCase().startsWith(t)})),nameOrUsernameIncludes:(e,t)=>e.search.toLowerCase().includes(t),sort(e,t){const i=e.toLowerCase(),{nameOrUsernameStartsWith:a,nameOrUsernameIncludes:n}=I.Members;return o()(t.filter((function(e){return n(e,i)})),(function(e){return a(e,i)?-1:0}))}},I.Labels={templateFunction:(e,t)=>`<li><span class="dropdown-label-box" style="background: ${D(e)}"></span> ${D(t)}</li>`},I.Issues={insertTemplateFunction:e=>e.reference||"${atwho-at}${id}",templateFunction(e){let{id:t,title:i,reference:a}=e;return`<li><small>${a||t}</small> ${D(i)}</li>`}},I.Milestones={templateFunction:(e,t)=>t?`<li>${Object(g.h)(Object(g.a)("%{milestone} (expired)"),{milestone:D(e)})}</li>`:`<li>${D(e)}</li>`},I.Contacts={templateFunction(e){let{email:t,firstName:i,lastName:a}=e;return`<li><small>${D(i)} ${D(a)}</small> ${D(t)}</li>`}};const N=Object(f.a)({inline:!0,classes:["gl-mr-2"]}).outerHTML;I.Loading={template:`<li style="pointer-events: none;">${N}Loading...</li>`},t.a=I}}]);
//# sourceMappingURL=commons-pages.admin.topics.edit-pages.admin.topics.new-pages.groups.milestones.edit-pages.groups.mil-0c34cb8e.e15e244f.chunk.js.map